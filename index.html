<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Insert title here</title>
	<link href="vendors/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
	<link href="vendors/bootstrap/css/bootstrap-theme.min.css" rel="stylesheet" />
	<script type="text/javascript" src="vendors/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="vendors/bootstrap/js/bootstrap.min.js"></script>
</head>
<body>
	<div class="container">
		<h1>Game of life</h1>
		<canvas id="myCanvas"></canvas>
	</div>

	<script type="text/javascript" src="GameOfLifeCanvas.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			var width = 50;
			var height = 50;
			
			var canvasOptions = {
					size: 5,
					figure: 'square',
					colorAlive: 'red'
			}
			
			var bacon = [
				[2,2],[2,3],[3,2],[3,3],[4,4],[4,5],[5,4],[5,5]
			];
			var glider = [
				[2,0],[4,0],[1,1],[1,2],[1,3],[4,3],[1,4],[2,4],[3,4]
			];
			var current = glider;
			
			var golCanvas = new GameOfLiveCanvas("myCanvas", width, height);
			function render() {
				golCanvas.clear();
				for(i = 0; i < current.length; i++) {
					golCanvas.alive(current[i][0], current[i][1]);
				}
				
				// current an server senden
				$.ajax({
					url: 'http://127.0.0.1:3000/stepper',
					type: 'post',
					contentType: 'text/plain',
					data: JSON.stringify(current)
				}).done(function(data){
					current = data;
					window.setTimeout(function(){
						render();
					}, 100);
				});
			}
			render();
		});
	</script>
</body>
</html>